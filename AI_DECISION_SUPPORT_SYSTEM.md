# 二、AI 决策支持系统搭建与落地

## （一）基于数字孪生场景的智能交互入口设计

在普洱蘑菇庄园民宿的数字孪生网页端轻量化模型前端页面中，==**嵌入数字人IP"普普"的智能交互入口**==——用户在浏览蘑菇庄园民宿的三维场景（如蘑菇森林小屋、云雾山景房、茶香阁等特色房型及周边茶园景观）后，可通过点击悬浮的"普普小助手"图标唤醒AI对话界面。

==**界面设计采用茶绿色与原木色的视觉搭配**==，与民宿茶文化主题呼应，同时支持语音输入与文字输入两种模式，适配不同用户的使用习惯。例如，用户需要预订房间时，"普普"会主动弹窗提示：

**"欢迎来到普洱蘑菇庄园！需要了解今日茶艺体验活动吗？可直接告诉我您的入住时间和人数哦～"**

==**通过场景联动减少用户操作步骤**==，解决传统预订中"信息查询需跳转多个页面"的繁琐问题。

### 技术实现特点：
- ==**数字人形象**==：采用普普IP角色，与民宿品牌形象统一
- ==**交互方式**==：支持文字输入、语音识别双模式
- ==**视觉设计**==：茶绿+原木配色方案，呼应普洱茶文化
- ==**响应式布局**==：适配PC端和移动端设备
- ==**技术架构**==：Vue 3 + TypeScript前端，Spring Boot后端，集成Dify AI引擎

## （二）动态信息匹配的智能决策引擎构建

针对"预订信息不对称"的痛点，==**AI决策支持系统核心在于打通民宿实时数据与用户需求的精准匹配**==。系统后台对接民宿房态管理系统、价格体系及周边文旅活动排期数据库，前端页面展示的信息将随后台数据实时更新：

### 实时房态查询功能：
- **用户询问**："明天有适合3人的房型吗？"
- ==**AI响应**==：立即调取实时房态，在对话界面同步显示：
  - ==**蘑菇森林小屋（201号）**== - ¥350/晚，2人房，含早餐，茶园景观
  - ==**云雾山景房（202号）**== - ¥380/晚，2人房，含早餐，山景阳台
  - ==**普洱茶香阁（203号）**== - ¥280/晚，2人房，不含早，茶具套装
  - ==**湖畔小筑（206号）**== - ¥428/晚，豪华间，湖景阳台，垂钓设备

### 文旅活动联动推荐：
- **用户提及**："想体验采茶活动"
- ==**系统响应**==：
  - ==**结合入住时间推荐匹配的活动场次**==
  - ==**在数字孪生场景中高亮标注茶园区域位置**==
  - 点击即可查看采茶体验流程的三维演示
  - ==**显示活动价格：¥88/人（住客优惠价）**==

==**通过"文字回答 + 场景可视化"的双重呈现**==，确保用户获取的预订信息与实际情况完全一致，避免"线上描述与线下不符"的纠纷。

### 技术实现亮点：
- ==**实时数据同步**==：MySQL数据库 + MyBatis Plus，房态信息实时更新
- ==**智能匹配算法**==：基于用户需求自动筛选符合条件的房型
- ==**备用服务机制**==：当Dify服务不可用时，自动切换到本地AI响应系统

## （三）AI驱动的预订全流程闭环实现

==**为提升预订效率，系统将AI交互与预订功能深度整合**==，形成"咨询-筛选-确认"的一站式闭环：

### 1. 需求筛选阶段
**用户输入**："预算400元以内，带阳台的房间"
==**AI处理**==：
- ==**自动筛选符合条件的房型**==
- 在对话框中输出：湖畔小筑（206号）- ¥428/晚，豪华间，湖景阳台
- ==**用户点击房间号即可查看房间三维全景及详细设施**==
- ==**实时显示房间可预订状态和剩余数量**==

### 2. 预订确认阶段
- ==**确认房型后，系统自动填充入住日期、人数等信息**==
- ==**支持从对话内容中智能提取关键信息**==
- 前端页面弹出简化版预订表单（仅需填写姓名、联系方式）
- ==**减少用户输入步骤，提升预订体验**==
- ==**集成Sa-Token认证系统，确保预订安全性**==

### 3. 实时反馈阶段
==**订单确认后，"茶茶"发送确认信息**==：
"已为您预留湖畔小筑206号房，推窗即可看到波光粼粼的湖面！这是为您生成的茶艺体验优惠码→CHA2025，可享受8折优惠哦～"

==**实现预订信息与文旅资源的即时联动**==。

### 技术实现核心：
- ==**智能表单填充**==：从对话历史中提取日期、人数、偏好等信息
- ==**订单处理服务**==：@Transactional事务管理，确保数据一致性
- ==**优惠码生成**==：自动生成个性化优惠码，提升用户体验

## （四）文旅资源联动的智能推荐算法应用

针对"文旅与民宿品牌联合不紧密"的问题，==**AI系统通过用户行为分析实现精准推荐**==。前端页面会记录用户在数字孪生场景中的浏览轨迹（如多次查看茶园区域、停留时间超过3分钟），结合对话内容构建用户画像：

### 亲子家庭用户画像
==**识别特征**==：提及"带孩子"、"家庭出游"
==**推荐套餐**==："民宿住宿+儿童茶艺启蒙课+蘑菇森林探索"组合
==**价格优势**==：套餐价格较单独预订优惠15%
==**展示方式**==：在前端页面展示套餐包含的数字孪生场景路线图
==**技术实现**==：基于关键词匹配和用户行为轨迹分析

### 文化体验者用户画像
==**识别特征**==：询问"茶文化"、"传统工艺"、浏览茶园场景时间长
==**推荐套餐**==："民宿住宿+手工制茶体验+普洱茶品鉴课程"
==**联动资源**==：周边非遗工坊、普洱茶博物馆
==**价格优势**==：打包服务较单独预订优惠20%
==**技术实现**==：基于停留时间和对话内容的深度学习分析

### 休闲度假者用户画像
==**识别特征**==：关注"放松"、"景观"、多次查看湖畔区域
==**推荐套餐**==："湖畔小筑住宿+SPA按摩+湖边垂钓体验"
==**特色服务**==：提供茶香SPA、湖景下午茶
==**增值体验**==：赠送茶园日出观赏活动
==**技术实现**==：Three.js场景交互数据分析

==**通过AI算法打破民宿与文旅资源的信息壁垒**==，让用户在预订民宿时即可一站式获取周边文化体验信息，推动"住宿+文旅"的深度融合。

### 智能推荐核心算法：
- ==**协同过滤算法**==：基于相似用户的偏好推荐
- ==**内容匹配算法**==：根据用户画像匹配相应套餐
- ==**实时更新机制**==：每5分钟更新一次推荐结果

## 技术架构说明

### 前端技术栈
- ==**框架**==：Vue 3 + TypeScript
- ==**3D渲染**==：Three.js数字孪生场景
- ==**AI交互**==：集成Dify对话引擎 + 备用本地AI响应
- ==**UI组件**==：Element Plus + 自定义茶文化主题
- ==**构建工具**==：Vite + 代理配置解决跨域问题

### 后端技术栈
- ==**框架**==：Spring Boot + MyBatis Plus
- ==**数据库**==：MySQL 8.0（端口3306）
- ==**AI服务**==：Dify API集成 + 故障转移机制
- ==**认证授权**==：Sa-Token
- ==**服务端口**==：8091（已修复端口配置问题）

### 核心功能模块
1. ==**数字人交互模块**==：茶茶AI助手对话系统
2. ==**实时数据同步**==：房态、价格、活动信息实时更新
3. ==**智能推荐引擎**==：基于用户行为的个性化推荐
4. ==**预订流程优化**==：一站式预订闭环体验
5. ==**文旅资源整合**==：周边活动和服务联动推荐
6. ==**备用服务机制**==：当Dify不可用时自动切换本地AI

### 系统部署与运行状态
- ==**前端服务**==：http://localhost:5173（正常运行）
- ==**后端服务**==：http://localhost:8091（正常运行）
- ==**数据库服务**==：MySQL localhost:3306（连接正常）
- ==**AI服务状态**==：Dify服务暂时不可用，备用AI系统已启用
